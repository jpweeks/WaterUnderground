<!doctype html>
<html>
<head>
	<title>ground water vis</title>
	<style type="text/css">
		body { margin: 0; overflow: hidden; background: #111; }
	</style>
</head>
<body>

	<script type="text/javascript" src="js/Three_aq_lineCustomAtts.js"></script>
	<script type="text/javascript" src="js/RequestAnimationFrame.js"></script>
	<script type="text/javascript" src="js/Tween.js"></script>
	<script type="text/javascript" src="js/Stats.js"></script>

	<script id="vs" type="x-shader/x-vertex">

		uniform float dispX;
		uniform float dispY;
		uniform float dispZ;

		attribute float displacement;
		varying float vDisplace;

		 void main() {

			//vec3 pos = vec3( position.x + dispX, position.y + dispY, position.z + dispZ );
			vDisplace = displacement;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position + ( normalize( position ) * -displacement * 2.5 ), 1.0 );
		 }

	</script>
	<script id="fs" type="x-shader/x-fragment">

		uniform float dispZ;
		varying float vDisplace;

		void main() {

			float depth = gl_FragCoord.z;
			gl_FragColor = vec4(
				smoothstep( -10.0, 30.0, vDisplace ), 
				smoothstep( 35.0, 20.0, vDisplace ), 
				smoothstep( 30.0, -30.0, vDisplace ), 
				smoothstep( 0.97, 0.90, depth ) * 0.9
			);
		 }

	</script>

	<script type="text/javascript" src="js/GlobeApp.js"></script>

	<script type="text/javascript" src="data/GRACE.2011.05.js"></script>


</body>
</html>